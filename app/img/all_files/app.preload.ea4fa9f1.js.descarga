(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()({1:[function(require,module,exports){var domainRedirect,domainRedirects,e,fastEventTemplates,fetchScriptBundle,fetchStyleBundle,getApp,getData,getEventApp,getPlatformApp,i,isCms,len,loadMaterialFont,retries,tidStorageKey,unsubscribe;tidStorageKey="ls.api-tid";isCms=window.location.pathname.indexOf("/admin")===0;retries=0;try{localStorage.setItem("storage.test","");localStorage.removeItem("storage.test");window.storageEnabled=true}catch(error1){e=error1;window.storageEnabled=false}if(window.storageEnabled){window.loggingSessionId=localStorage.getItem("ls.logging.sessionId")||(new Date).getTime().toString().substr(5);localStorage.setItem("ls.logging.sessionId",window.loggingSessionId)}domainRedirects=[{old:"cloudwebinars.withgoogle.com",new:"cloudonair.withgoogle.com"},{old:"atmosphere.withgoogle.com",new:"cloudonair.withgoogle.com"}];fastEventTemplates=["cloud_q1_2019","cloud_summit_2018","single_session","default"];for(i=0,len=domainRedirects.length;i<len;i++){domainRedirect=domainRedirects[i];if(window.location.hostname===domainRedirect.old){window.location.href=window.location.href.replace(domainRedirect.old,domainRedirect["new"]);return}}getApp=function(token){var event,eventTemplate,isEvent,path;path=window.location.pathname.split("/");if(isCms){isEvent=path[4]==="events";event=path[5];if(event==="create"){eventTemplate=path[6];fetchScriptBundle(templateBundleMap.event[eventTemplate].script);fetchStyleBundle(templateBundleMap.event[eventTemplate].style);return}if(location.pathname.indexOf("/admin/instances")===-1){fetchScriptBundle(templateBundleMap.platform["default"].script);fetchStyleBundle(templateBundleMap.platform["default"].style);return}}else{isEvent=path[1]==="events"||path[1]==="live";event=path[2]}if(isEvent){return getEventApp(token,event)}else{return getPlatformApp(token)}};getPlatformApp=function(token){var debugInstanceCookie,debugInstanceKey,instanceId,instanceName,instanceRef;debugInstanceKey="DEBUG_INSTANCE";debugInstanceCookie=document.cookie.match(new RegExp("(^| )"+debugInstanceKey+"=([^;]+)"));if(debugInstanceCookie){instanceName=debugInstanceCookie[2]}else{instanceName=location.hostname===window.CONFIG.default_instance?"default":location.hostname}instanceId=location.pathname.indexOf("/admin/instances")===0?location.pathname.split("/")[3]:null;instanceRef=instanceId||instanceName;getData(token,"/instances/"+instanceRef,function(data){var defaultInstanceUrl,instanceTemplate,port;window.instanceData=data;instanceTemplate=data.template.toLowerCase();port=window.ng4PlatformPortMap?window.ng4PlatformPortMap[instanceTemplate]:false;if(!isCms&&window.CONFIG.templates.angularjs.instance.indexOf(instanceTemplate.toUpperCase())>=0){fetchScriptBundle(templateBundleMap.angularJsDependencies)}if(!isCms&&window.CONFIG.is_local_dev&&port){defaultInstanceUrl=window.CONFIG.protocol+"://"+(""+window.CONFIG.default_instance)+(":"+port);fetchScriptBundle(defaultInstanceUrl+"/inline.bundle.js",function(){return fetchScriptBundle(defaultInstanceUrl+"/polyfills.bundle.js",function(){return fetchScriptBundle(defaultInstanceUrl+"/vendor.bundle.js",function(){return fetchScriptBundle(defaultInstanceUrl+"/scripts.bundle.js",function(){return fetchScriptBundle(defaultInstanceUrl+"/main.bundle.js")})})})});return fetchStyleBundle(defaultInstanceUrl+"/styles.bundle.css")}else{fetchScriptBundle(templateBundleMap.platform[instanceTemplate].script);return fetchStyleBundle(templateBundleMap.platform[instanceTemplate].style)}});return loadMaterialFont()};getEventApp=function(token,event){var eventTemplate,event_url,fetch;if(!event){window.location="/";return false}fetch=function(eventTemplate){var defaultInstanceUrl;if(!isCms&&window.CONFIG.templates.angularjs.event.indexOf(eventTemplate.toUpperCase())>=0){fetchScriptBundle(templateBundleMap.angularJsDependencies);fetchStyleBundle("https://ajax.googleapis.com/ajax/libs/angular_material/1.1.6/angular-material.min.css")}if(window.CONFIG.is_local_dev&&window.ng4EventPortMap[eventTemplate]){defaultInstanceUrl=window.CONFIG.protocol+"://"+(""+window.CONFIG.default_instance)+(":"+window.ng4EventPortMap[eventTemplate]);fetchScriptBundle(defaultInstanceUrl+"/inline.bundle.js",function(){return fetchScriptBundle(defaultInstanceUrl+"/polyfills.bundle.js",function(){return fetchScriptBundle(defaultInstanceUrl+"/vendor.bundle.js",function(){return fetchScriptBundle(defaultInstanceUrl+"/scripts.bundle.js",function(){return fetchScriptBundle(defaultInstanceUrl+"/main.bundle.js")})})})});return fetchStyleBundle(defaultInstanceUrl+"/styles.bundle.css")}else{fetchScriptBundle(templateBundleMap.event[eventTemplate].script);return fetchStyleBundle(templateBundleMap.event[eventTemplate].style)}};if(window.CONFIG.template){eventTemplate=window.CONFIG.template.toLowerCase();event_url=fastEventTemplates.indexOf(eventTemplate)!==-1?"/events/"+event+"?shallow=true":"/events/"+event;fetch(eventTemplate)}else{event_url="/events/"+event}getData(token,event_url,function(data){var path;window.eventData=data;path=window.location.pathname.split("/");if(path[2]==="instances"&&path[3]!==data.instance){window.location.pathname="/admin/instances/"+data.instance+"/events/"+data.id}if(!window.CONFIG.template){eventTemplate=data.template.toLowerCase();fetch(eventTemplate)}if((window.angular||window.angularLoaded)&&window.bootstrapApp){return window.bootstrapApp()}});return loadMaterialFont()};loadMaterialFont=function(){var font,fontExists,fontFaceSet,htmlEl,loadFont;if(!document.fonts||!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)){return}htmlEl=document.querySelector("html");htmlEl.classList.add("mf-loading");font="24px 'Material Icons Extended'";fontFaceSet=document.fonts;fontExists=function(font){return fontFaceSet.check(font)};loadFont=function(font){return fontFaceSet.load(font).then(function(){if(fontExists(font)){return htmlEl.classList.remove("mf-loading")}else{return console.warn(font,"failed to load")}})["catch"](function(){return console.warn(font,"failed to load")})};if(fontFaceSet.status==="loaded"){return loadFont(font)}else{fontFaceSet.onloadingdone=function(){return loadFont(font)};return fontFaceSet.onloadingerror=function(failedFont){var failedFontName;failedFontName=failedFont.fontfaces[0].family;console.warn(failedFontName,"failed to load, making another attempt");return loadFont(failedFontName)}}};fetchScriptBundle=function(bundle,callback){var js;callback=callback||function(){};js=document.createElement("script");js.type="text/javascript";js.defer="defer";js.src=bundle;js.onload=callback;return document.body.appendChild(js)};window.showSignIn=function(){document.getElementsByTagName("html")[0].classList.add("show-gated-signin");return window.signIn=function(){var googleProvider;googleProvider=new window.firebase.auth.GoogleAuthProvider;googleProvider.setCustomParameters({prompt:"select_account"});return window.firebase.auth().signInWithPopup(googleProvider).then(function(){return location.reload(true)})["catch"](function(error){if(error.code==="auth/web-storage-unsupported"){return window.showCookieError()}})}};window.showSignOut=function(callback){var html;window.signOut=function(){return window.firebase.auth().signOut().then(function(){return typeof callback==="function"?callback():void 0})};html=document.getElementsByTagName("html")[0];html.classList.add("show-gated-signout");return html.classList.remove("show-gated-signin")};window.showPrivateError=function(callback){var html;window.signOut=function(){return window.firebase.auth().signOut().then(function(){return typeof callback==="function"?callback():void 0})};html=document.getElementsByTagName("html")[0];html.classList.add("show-private-error");return html.classList.remove("show-gated-signin")};window.showOAuthSignOut=function(callback){var html;window.signOut=function(){return window.firebase.auth().signOut().then(function(){return typeof callback==="function"?callback():void 0})};html=document.getElementsByTagName("html")[0];html.classList.add("show-oauth-signout");return html.classList.remove("show-gated-signin")};window.showGeneralError=function(){var html;html=document.getElementsByTagName("html")[0];return html.classList.add("show-general-error")};window.showAuthError=function(callback){var html;window.signOut=function(){return window.firebase.auth().signOut().then(function(){return typeof callback==="function"?callback():void 0})};html=document.getElementsByTagName("html")[0];return html.classList.add("show-auth-error")};window.showOfflineError=function(){var html;html=document.getElementsByTagName("html")[0];return html.classList.add("show-offline-error")};window.showCookieError=function(){var html;html=document.getElementsByTagName("html")[0];html.classList.add("show-cookie-error");return html.classList.remove("show-gated-signin")};fetchStyleBundle=function(bundle){var styl;styl=document.createElement("link");styl.rel="stylesheet";styl.type="text/css";styl.href=bundle;return document.body.appendChild(styl)};getData=function(token,endpoint,callback,status){var instance_header,path,tid,xmlhttp;if(retries>3){console.log("Failed 3 tries in a row, halting.");if(status===401&&window.firebase.auth().currentUser){showAuthError(function(){return location.reload(true)})}else{showGeneralError()}return false}retries++;if(isCms){path=location.pathname.split("/");if(isCms&&path.length>=4){instance_header=path[3]}}xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){var response;if(xmlhttp.readyState===XMLHttpRequest.DONE){if(xmlhttp.getResponseHeader("set-tid")){if(window.storageEnabled){localStorage.setItem(tidStorageKey,JSON.stringify(xmlhttp.getResponseHeader("set-tid")))}}switch(xmlhttp.status){case 200:response=JSON.parse(xmlhttp.response);if(response===null){if(isCms){return location.replace("/admin")}else{return location.replace("/")}}else{return callback(response)}break;case 401:if(window.firebase.auth().currentUser){console.log("auth token has expired, refresh it and try again");return window.firebase.auth().currentUser.getIdToken(true).then(function(_this){return function(token){return getData(token,endpoint,callback,401)}}(this))}else{return showSignIn()}break;case 403:response=JSON.parse(xmlhttp.response);if(xmlhttp.getResponseHeader("set-tid")){console.log("api requires tid, retrying after set-tid");return getData(token,endpoint,callback)}else if(response.message.indexOf("private event")>-1){return showPrivateError(function(){return location.reload(true)})}else if(window.firebase.auth().currentUser){return showSignOut(function(){return location.reload(true)})}else{return showSignIn()}break;case 404:if(window.location.pathname==="/"){return window.document.body.innerHTML="404 Not Found"}else{return window.location="/"}break;case 406:return showOAuthSignOut(function(){return location.reload(true)});case 500:return showGeneralError();default:console.log("unknown error, failed to reach API, retrying...");return setTimeout(function(){return getData(token,endpoint,callback)},1e4)}}};xmlhttp.open("GET","//"+location.host+"/api"+endpoint);if(token){xmlhttp.setRequestHeader("Authorization",token)}if(isCms&&instance_header){xmlhttp.setRequestHeader("Instance",instance_header)}if(window.storageEnabled&&localStorage.getItem(tidStorageKey)){tid=JSON.parse(localStorage.getItem(tidStorageKey));xmlhttp.setRequestHeader("tid",tid)}xmlhttp.setRequestHeader("Accept","application/json, text/plain, */*");return xmlhttp.send()};unsubscribe=window.firebase.auth().onAuthStateChanged(function(_this){return function(user){var autoSignIn,gated;if(user){window.firebaseUser=user;user.getIdToken().then(function(token){return getApp(token)})}else{autoSignIn=window.location.search.indexOf("auto-sign-in")!==-1;gated=window.CONFIG.gated;if(autoSignIn||gated||isCms){showSignIn()}else{getApp()}}return unsubscribe()}}(this))},{}]},{},[1]);